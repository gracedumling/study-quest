import{r as i,j as e,a as g}from"./app-Cgnp6kDH.js";import{A as v}from"./app-layout-BERHGw6H.js";import"./sidebar-BNUyo_2D.js";import"./button-Bth_Z2Xx.js";import"./index-CwO6JxfM.js";import"./index-DRgt1isS.js";import"./app-logo-icon-DEUVOW3f.js";const y=[{title:"Leaderboard",href:"/leaderboard"}];function P({normalLeaderboard:l=[],suddenDeathLeaderboard:d=[],userRankNormal:h={rank:null,score:null,total:0},userRankSuddenDeath:u={rank:null,score:null,total:0},activeMode:p="normal"}){const[r,o]=i.useState(p),[n,w]=i.useState(!1),[c,j]=i.useState(!1);i.useEffect(()=>{(()=>{(!Array.isArray(l)||!Array.isArray(d))&&(console.error("Leaderboard data is not in expected format"),j(!0))})()},[l,d]);const b=()=>r==="normal"?h:u,m=t=>c?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-red-500 mb-4",children:"Failed to load leaderboard data"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90",children:"Reload Page"})]}):n?e.jsx("div",{className:"space-y-4 p-4",children:Array.from({length:5}).map((s,a)=>e.jsx("div",{className:"h-8 animate-pulse bg-muted rounded"},a))}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Rank"}),e.jsx("th",{className:"p-3 text-left",children:"Player"}),e.jsx("th",{className:"p-3 text-right",children:"Score"}),e.jsx("th",{className:"p-3 text-right hidden md:table-cell",children:"Level"}),e.jsx("th",{className:"p-3 text-right hidden md:table-cell",children:"Streak"}),e.jsx("th",{className:"p-3 text-right hidden md:table-cell",children:"Collectibles"}),e.jsx("th",{className:"p-3 text-right hidden md:table-cell",children:"Date"})]})}),e.jsx("tbody",{children:t.length>0?t.map((s,a)=>e.jsxs("tr",{className:"border-b border-muted hover:bg-muted/40",children:[e.jsx("td",{className:"p-3",children:a+1}),e.jsx("td",{className:"p-3 font-medium",children:s.user}),e.jsx("td",{className:"p-3 text-right font-bold",children:s.score.toLocaleString()}),e.jsx("td",{className:"p-3 text-right hidden md:table-cell",children:s.level}),e.jsx("td",{className:"p-3 text-right hidden md:table-cell",children:s.streak}),e.jsx("td",{className:"p-3 text-right hidden md:table-cell",children:s.collectibles}),e.jsx("td",{className:"p-3 text-right hidden md:table-cell",children:s.date||"N/A"})]},a)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-4 text-center text-muted-foreground",children:"No leaderboard entries found. Be the first to play and set a high score!"})})})]})}),x=t=>c?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-red-500 mb-4",children:"Failed to load leaderboard data"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90",children:"Reload Page"})]}):n?e.jsx("div",{className:"space-y-4 p-4",children:Array.from({length:3}).map((s,a)=>e.jsx("div",{className:"h-24 animate-pulse bg-muted rounded"},a))}):e.jsx("div",{className:"md:hidden space-y-4",children:t.length>0?t.map((s,a)=>e.jsxs("div",{className:"bg-card p-4 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"font-medium",children:["#",a+1," ",s.user]}),e.jsxs("div",{className:"text-right font-bold",children:[s.score.toLocaleString()," pts"]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{children:["Level ",s.level]}),e.jsxs("div",{children:["Streak: ",s.streak]}),e.jsxs("div",{children:["Items: ",s.collectibles]})]}),s.date&&e.jsx("div",{className:"text-right text-xs text-muted-foreground mt-2",children:s.date})]},a)):e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No leaderboard entries found. Be the first to play!"})}),N=()=>{var s;const t=b();return c?e.jsx("div",{className:"p-4 text-center text-red-500",children:"Unable to load your rank data."}):n?e.jsxs("div",{className:"p-4 flex justify-center items-center gap-6",children:[e.jsx("div",{className:"h-16 w-24 animate-pulse bg-muted rounded"}),e.jsx("div",{className:"h-16 w-24 animate-pulse bg-muted rounded"})]}):!t||!t.rank?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"You don't have a rank yet. Play a game to get on the leaderboard!"}):e.jsxs("div",{className:"p-4 bg-muted rounded-lg text-center",children:[e.jsx("h3",{className:"text-sm uppercase font-medium text-muted-foreground mb-2",children:"Your Rank"}),e.jsxs("div",{className:"flex justify-center items-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Rank"}),e.jsxs("div",{className:"text-2xl font-bold",children:["#",t.rank]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["of ",t.total]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Score"}),e.jsx("div",{className:"text-2xl font-bold",children:((s=t.score)==null?void 0:s.toLocaleString())||0})]})]})]})},f=()=>e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex border-b border-muted mb-4",children:[e.jsx("button",{className:`px-4 py-2 font-medium ${r==="normal"?"border-b-2 border-primary text-primary":"text-muted-foreground"}`,onClick:()=>o("normal"),children:"Normal Mode"}),e.jsx("button",{className:`px-4 py-2 font-medium ${r==="suddenDeath"?"border-b-2 border-primary text-primary":"text-muted-foreground"}`,onClick:()=>o("suddenDeath"),children:"Sudden Death"}),e.jsx("div",{className:"ml-auto text-sm text-muted-foreground self-center pr-2",children:"Updated in real-time"})]}),e.jsxs("div",{className:"bg-card shadow-lg rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-muted",children:[e.jsxs("h2",{className:"text-xl font-bold",children:[r==="normal"?"Normal Mode":"Sudden Death Mode"," Leaderboard"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r==="normal"?"Players with highest scores in standard gameplay":"Master players who survived with only one heart"})]}),e.jsxs("div",{className:"p-4",children:[N(),e.jsxs("div",{className:"mt-6",children:[r==="normal"&&e.jsxs(e.Fragment,{children:[m(l||[]),x(l||[])]}),r==="suddenDeath"&&e.jsxs(e.Fragment,{children:[m(d||[]),x(d||[])]})]})]})]})]});return e.jsxs(v,{breadcrumbs:y,children:[e.jsx(g,{title:"StudyQuest - Leaderboard"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Leaderboard"}),e.jsx("p",{className:"text-muted-foreground",children:"See how you stack up against other history scholars!"})]}),e.jsx(f,{}),e.jsxs("div",{className:"mt-8 bg-muted rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"How to climb the leaderboard"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary font-bold",children:"✓"}),e.jsx("span",{children:"Answer questions correctly to earn points and increase your streak"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary font-bold",children:"✓"}),e.jsx("span",{children:"Rarer questions give higher streak bonuses"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary font-bold",children:"✓"}),e.jsx("span",{children:"Use powerups strategically - Double Points can really boost your score!"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary font-bold",children:"✓"}),e.jsx("span",{children:"Complete higher levels for bigger challenges and rewards"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary font-bold",children:"✓"}),e.jsx("span",{children:"Try Sudden Death mode if you're feeling confident!"})]})]}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("button",{onClick:()=>window.location.href="/play",className:"px-6 py-2 bg-primary text-white rounded-md hover:bg-primary/90",children:"Play Now"})})]})]})})]})}export{P as default};
